<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê²€ìƒ‰ ê²°ê³¼</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .loading { font-size: 18px; }
    .results { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
    .card {
      border: 1px solid #ddd; border-radius: 8px; padding: 10px;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
    }
    .card img { width: 100%; height: 150px; object-fit: cover; border-radius: 4px; }
    .card-title { font-weight: bold; margin: 10px 0 5px; }
    .card-price { color: green; margin-bottom: 10px; }
    .card a { text-decoration: none; color: #0066cc; }
  </style>
</head>
<body>

<h2>ğŸ” ê²€ìƒ‰ ê²°ê³¼</h2>
<p class="loading">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”... ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤.</p>
<div class="results" id="results"></div>

<script>
  const query = new URLSearchParams(window.location.search).get("query");

  fetch(`/api/search?query=${encodeURIComponent(query)}`)
    .then(res => res.json())
    .then(data => {
      document.querySelector(".loading").style.display = "none";
      const container = document.getElementById("results");

      if (data.length === 0) {
        container.innerHTML = "<p>ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤ ğŸ˜¢</p>";
        return;
      }

      data.forEach(item => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <img src="${item.image}" alt="${item.title}">
          <div class="card-title">${item.title}</div>
          <div class="card-price">${item.price}</div>
          <a href="${item.link}" target="_blank">ìƒí’ˆ ë³´ê¸°</a>
        `;
        container.appendChild(card);
      });
    })
    .catch(err => {
      console.error("âŒ API ì˜¤ë¥˜:", err);
      document.querySelector(".loading").innerText = "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
    });
</script>

</body>
</html>

